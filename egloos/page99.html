<html>
<head>	<meta http-equiv='pragma' content='no-cache' />
	<meta http-equiv='cache-control' content='no-cache' />
	<meta http-equiv='Content-type' content='text/html; charset=utf-8' />
	<meta name="author" content="namhyung" />
	<meta name="keywords" content="F/OSS study" />
	<meta http-equiv="X-XRDS-Location" content="http://namhyung.myid.net/xrds" />
	<link rel="openid.server" href="http://www.myid.net/server" />
	<link rel="openid.delegate" href="http://namhyung.myid.net" />
	<link rel="shortcut icon" href="http://md.egloos.com/img/favicon.ico" />
	<link rel="pingback" href="https://rpc.egloos.com/rpc1" />
	<link rel="alternate" type="application/rss+xml" title="F/OSS study" href="http://rss.egloos.com/blog/studyfoss" />
	<title>F/OSS study</title>
	<script type="text/javascript" src="http://md.egloos.com/js/ap.js?ver=1.043"></script>
	<script type="text/javascript" src="http://md.egloos.com/js/gd.js?ver=1.002"></script>
	<script type="text/javascript" src="http://md.egloos.com/js/eg.js?ver=1.012"></script>
	<script type="text/javascript" src="http://md.egloos.com/js/cr.js?ver=1.002"></script>
    <script type="text/javascript" src="http://md.egloos.com/js/page/ins.js?ver=1.4"></script>
		
	<script type="text/javascript" src="http://md.egloos.com/js/lib/prototype_v1511.js"></script>
	<script type="text/javascript" src="http://md.egloos.com/js/control/Control.js"></script>
	<script type="text/javascript" src="http://md.egloos.com/js/control/Control.ImgModal.js?ver=1.004"></script>
	<script type="text/javascript" src="http://md.egloos.com/js/page/blog/compatible.js"></script>
	<script type="text/javascript" src="http://md.egloos.com/js/player.js"></script>
	
	<script type="text/javascript" src="http://md.egloos.com/js/lazyload.js"></script>
	
<link type="text/css" rel="stylesheet" href="http://md.egloos.com/css/egloos_template.css?ver=1.002" media="screen" />
<style type="text/css">
/* jiinny text-only skin
 */


BODY
{
	BACKGROUND : #FCFEFF;
	MARGIN : 0PX;
	PADDING : 0PX;
}

BODY,TD,DIV,LI
{
	FONT : 9PT/160% Tahoma, SANS-SERIF, Verdana, monaco,굴림,돋움,SANS-SERIF;
	COLOR : #33455E;
}

A:LINK		{ COLOR: #0000C0; TEXT-DECORATION: NONE; }
A:VISITED	{ COLOR: #0000C0; TEXT-DECORATION: NONE; }
A:ACTIVE	{ COLOR: #0000C0; TEXT-DECORATION: NONE; }
A:HOVER		{ COLOR: #C00000; TEXT-DECORATION: UNDERLINE; }

/* filter의 shadow보다 품질을 좋게 하기 위해서*/
DIV.HEADER
{
	FONT : BOLD 28PT/100% Georgia,나눔고딕,돋움,HY견고딕;
	TEXT-ALIGN=RIGHT;
	WIDTH=100%;
	PADDING-BOTTOM:10px;
	filter:progid:DXImageTransform.Microsoft.Blur;
}

#HEADER_SHADOW
{
	POSITION : relative;
	top :-50px; right:0px;
	FONT : BOLD 28PT/100% Georgia,나눔고딕,돋움,HY견고딕;
	TEXT-ALIGN=RIGHT;
	WIDTH=100%;
	PADDING-BOTTOM:10px;
}

#HEADER_SHADOW A:LINK		{ COLOR: #000080; TEXT-DECORATION: NONE; }
#HEADER_SHADOW A:VISITED		{ COLOR: #000080; TEXT-DECORATION: NONE; }
#HEADER_SHADOW A:HOVER		{ COLOR: #000080; TEXT-DECORATION: NONE; }

DIV.HEADER A:LINK		{ COLOR: #AAA; TEXT-DECORATION: NONE; }
DIV.HEADER A:VISITED	{ COLOR: #AAA; TEXT-DECORATION: NONE; }
DIV.HEADER A:HOVER	{ COLOR: #AAA; TEXT-DECORATION: NONE; }

DIV.URL			{ FONT : 8PT/100% VERDANA,TAHOMA; }
DIV.USERMENU
{
	POSITION:absolute:
	left:0px;
	top:0px;
	COLOR : #FFFFFF;
	FONT : bold 7pt;
	TEXT-ALIGN : RIGHT;
	MARGIN-BOTTOM : 50px;
	BACKGROUND : #000060;
	PADDING : 4px;
	BORDER-BOTTOM : 2px #336699 SOLID;
}
DIV.USERMENU A:LINK {COLOR:#FFF}
DIV.USERMENU A:VISITED {COLOR:#FFF}
DIV.USERMENU A:HOVER {COLOR:#FFF}

DIV.PROFILE
{
	WIDTH : 200PX;
	PADDING : 0PX 0PX 10PX;
	LINE-HEIGHT : 150%;
	OVERFLOW : HIDDEN;
}

DIV.MNTTL
{
	FONT:BOLD 10pt;
	WIDTH : 200PX;
	BORDER-BOTTOM :	1PX #888 DASHED;
	PADDING : 2PX 0PX 0PX;
	MARGIN : 25PX 0PX 10PX;
	TEXT-ALIGN:CENTER;
}

DIV.MNBODY
{
	font:9pt/135%;
	WIDTH :200PX;
}

DIV.POST { MARGIN-BOTTOM : 50PX;}

DIV.POST_HEAD
{
	MARGIN-BOTTOM : 15PX;
	PADDING-BOTTOM : 3PX;
}

DIV.POST_TTL
{
	TEXT-DECORATION: UNDERLINE;
	FONT: BOLD 10pt Georgia ;
	COLOR: #000;
}

DIV.POST_BODY
{
	FONT:10pt/150%;
	WIDTH : 100%;
	MARGIN-BOTTOM : 30PX;
	OVERFLOW : HIDDEN;
}

DIV.POST_BODY A:LINK
{
	COLOR: #4040CF;
	TEXT-DECORATION:none;
	border-bottom:1px DOTTED #4040CF
}

DIV.POST_BODY A:VISITED
{
	COLOR: #4040CF;
	TEXT-DECORATION: NONE;
	border-bottom:1px DOTTED #4040CF
}

DIV.POST_BODY A:HOVER
{
	COLOR: #CF4040;
	TEXT-DECORATION: NONE;
	border-bottom:1px DOTTED #CF4040
}


DIV.POST_TAIL {
	FONT : 11PX/150% VERDANA, TAHOMA, 돋움;
	MARGIN-TOP : 10PX;
	TEXT-ALIGN : RIGHT;
}

DIV.POST_TAIL A:LINK {COLOR: #006699; TEXT-DECORATION: NONE; }
DIV.POST_TAIL A:VISITED {COLOR: #006699; TEXT-DECORATION: NONE; }
DIV.POST_TAIL A:HOVER {COLOR: #006699; TEXT-DECORATION: NONE; border-bottom:1px dotted #cc0000}

DIV.COMMENT
{
	BORDER : 1PX #D3D3D3 SOLID;
	BACKGROUND : #F7F7F7;
	PADDING : 15PX;
	MARGIN : 20PX 0PX;
}

DIV.COMMENT_BODY
{
	MARGIN-BOTTOM : 20PX;
}

DIV.COMMENT_TAIL
{
	MARGIN : 8PX 0PX 5PX;
	FONT : 8PT/150% VERDANA, TAHOMA, 돋움;
	COLOR : #777;
}

DIV.COMMENT_INPUT
{
	MARGIN-TOP : 20PX;
	BORDER-TOP : 1PX #AAA DOTTED;
	PADDING-TOP : 20PX;
}

DIV.COMMENT_LINE
{
	BORDER-TOP : 1PX #AAA DOTTED;
	MARGIN : 10PX 0PX 15PX;
}
DIV.POST_BODY IMG
{
	filter:
	progid:DXImageTransform.Microsoft.DropShadow(color=#CCCCCC,offX=3, offY=3)
	border:1px #000 solid;
}

DIV.VERSION
{
  font-weight: bold;
  color: white;
  background: #525d76;
  border: 1px solid silver;
#  margin: 0.5em 10% 0.5em 1em;
  padding: 0.5em;
}

DIV.SOURCE
{
  font-family: monospace, Courier New, Seoul;
#  margin: 0.5em 10% 0.5em 1em;
  margin: 1em;
  color: navy;
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

BLOCKQUOTE
{
	font: 9pt/150% Courier New, Seoul;
	Border: 1px #DDD dotted;
	padding:5px;
	color:#000;
	margin:20px;
}

/* begin style of emphasis */
.BOX1
{
	font: 9pt/150% Courier New, Seoul;
	Border: 1px #DDD SOLID;
	padding:5px;
	color:#00FF00;
	background:#000;
	margin:20px;
}

.BOX2
{
	font: 9pt/150% Courier New, Seoul;
	Border: 1px #DDD SOLID;
	padding:5px;
	color:#FFC000;
	background:#000;
	margin:20px;
}

.EM1
{
	background : #FFFF80;
}

.EM2
{
	background : #F0C0FF;
}
/* end style of emphasis */

#RIGHTMAIN{ POSITION: ABSOLUTE; RIGHT:300px; LEFT:40px;}

#LEFTSIDE
{
	POSITION: ABSOLUTE;
	TOP:60PX;
	RIGHT: 20PX;
	FONT: 9PT;
	WIDTH:200PX;
	BORDER-LEFT: 2PX #BCBDC4 DASHED;
	PADDING: 20PX;
}

#LEFTSHOW
{
	TOP:60PX;
	RIGHT: 0PX;
	FONT: 7PT/150%;
	WIDTH:7px;
	HEIGHT:200px;
	BACKGROUND:#DDDDDD;
	POSITION: ABSOLUTE;
	CURSOR:HAND;
	BORDER-TOP: 3PX #7598A3 SOLID;
	BORDER-LEFT: 2PX #7598A3 DASHED;
	BORDER-BOTTOM: 3PX #7598A3 SOLID;
}

#LEFTHIDE
{
	TOP:63PX;
	RIGHT: 23PX;
	FONT: 7PT/150%;
	POSITION: ABSOLUTE;
	CURSOR:HAND;
	WIDTH:18px;
	HEIGHT:18px;
	TEXT-ALIGN:CENTER;
}
#BOTTOMBANNER
{
	TEXT-ALIGN=CENTER;
	WIDTH=100%;
}

IMG.IMG_DECO
{
	TEXT-ALIGN:CENTER;BORDER:1px #000 SOLID;
	filter:progid:DXImageTransform.Microsoft.DropShadow(color=#AAAAAA,offX=3, offY=3)
}

#LOGO
{
	WIDTH=200;
	TEXT-ALIGN=CENTER;
	FILTER:
	progid:DXImageTransform.Microsoft.DropShadow(color=#CCCCCC,offX=3, offY=3)
	progid:DXImageTransform.Microsoft.Glow(Color=#AAAAAA, strength=5)
}

/* 여기서 부터는 시스템에관한 클래스 이므로 변경하지 않으시는 것이 좋습니다. */

DIV.TRACK_TOP { LINE-HEIGHT : 170%; }
DIV.ARCHIVE_HEAD { FONT-WEIGHT : BOLD; MARGIN-BOTTOM : 10PX; }
DIV.ARCHIVE_BODY { MARGIN : 20PX 0PX; LINE-HEIGHT : 160%; PADDING-BOTTOM : 100PX; }

IMG.IMAGE_TOP	{ MARGIN-BOTTOM : 15PX; }
IMG.IMAGE_LEFT	{ MARGIN-RIGHT : 15PX; MARGIN-BOTTOM : 15PX; }
IMG.IMAGE_MID	{ MARGIN-TOP : 15PX; MARGIN-BOTTOM : 15PX; }
IMG.BOOKMK		{ MARGIN : 10PX; BORDER : 0PX; }
IMG.USERMENU	{ MARGIN-LEFT : 8PX; }
IMG.LOGO
{
BORDER: 1PX #000 SOLID;
}

DIV.BANNER	{ MARGIN-TOP : 30PX; }

.SMALL		{ FONT-SIZE : 11PX; }
.DATE		{ FONT : BOLD 8PT/150% VERDANA, TAHOMA, 돋움; }
.TIME		{ FONT : 8PT/150% VERDANA, TAHOMA, 돋움; TEXT-ALIGN : LEFT; }
.AUTHOR		{ FONT : BOLD 9PT; }
.TXTFLD		{ FONT-SIZE:9PT;COLOR:#000; BORDER:1PX SOLID #666678; BACKGROUND:#FFF; }



/* 여기서 부터는 달력 및 XML에 관련된 클래스입니다. */


DIV.CAL_TOP { }
DIV.CAL { MARGIN : 20PX 0PX 20PX; WIDTH : 200PX; TEXT-ALIGN : CENTER;}
DIV.CAL_HEAD { WIDTH : 150PX; FONT : 8PT/150% VERDANA; TEXT-ALIGN : CENTER; PADDING : 4PX 0PX; MARGIN-BOTTOM : 10PX;}
DIV.CAL_BODY { WIDTH : 200PX; TEXT-ALIGN : CENTER;}
DIV.CAL_BOTTOM { }

.CAL
{
	FONT : 7PT/170% VERDANA, 돋움;
	TEXT-ALIGN : CENTER;
}

.CAL_DAY
{
	FONT : BOLD 7PT/170% VERDANA, 돋움;
	TEXT-ALIGN : CENTER;
	BACKGROUND : #CCC;
}

.CAL_SUN
{
	FONT : BOLD 7PT/170% VERDANA, 돋움;
	COLOR : #D36654;
	TEXT-ALIGN : CENTER;
	BACKGROUND : #CCC;
}

.CAL_SAT
{
	FONT : BOLD 7PT/170% VERDANA, 돋움;
	COLOR : #3572A1;
	TEXT-ALIGN : CENTER;
	BACKGROUND : #CCC;
}

.CAL_TODAY
{
	FONT : BOLD 7PT/170% VERDANA, 돋움;
	BACKGROUND : #E3E3E3;
	COLOR : #3D5586;
	TEXT-ALIGN : CENTER;
	BORDER : 1px #AAA SOLID;
}

.CAL_TR
{
	BACKGROUND:#EFEFEF;
}

DIV.XML { FONT : 8PT/150% VERDANA; TEXT-ALIGN : CENTER; }
   div.memobody {
       width : 200px;
       overflow : hidden;
       }
   </style>
<link type="text/css" rel="stylesheet" href="http://md.egloos.com/css/egloo_navibar.css?ver=1.2" media="screen" />
<link type="text/css" rel="stylesheet" href="http://md.egloos.com/css/common/popup.css?ver=2.00" />
<link type="text/css" rel="stylesheet" href="http://md.egloos.com/css/common/button.css" />
<script type="text/javascript" src="http://md.egloos.com/js/modal/Modal.js"></script>
<script type="text/javascript" src="http://md.egloos.com/js/modal/Modal.Center.js"></script>
<script type="text/javascript" src="http://md.egloos.com/js/page/blog/Modal.BookmarkDlg.js?ver=1.002"></script>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function() {
    new Modal.BookmarkDlg('egloo_bookmark', {overlay: true,
                'groupURL'     : "/exec/egloo_bookmark_group.php",
                'remoteURL'    : "/exec/egloo_insbookmark_exec.php"});
    if(''==''){
	    	copy_contents('studyfoss.egloos.com','namhyung','0');
    }
});
//]]>
</script></head>
<body>
<iframe name="cmtviewfrm" id="cmtviewfrm" src="about:blank" width="0" height="0" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" style="display:block;border:0px;"></iframe>
<DIV CLASS=USERMENU>  
<a href="http://www.egloos.com">Egloos</a> | <a href="http://sec.egloos.com/login.php?returnurl=http%3A%2F%2Fstudyfoss.egloos.com%2Fpage%2F99">Log-in</a> </DIV>

<DIV ID=RIGHTMAIN>
<DIV CLASS=HEADER><a href="http://studyfoss.egloos.com" name="egloo_title">F/OSS study</a></DIV>
<DIV ID=HEADER_SHADOW><a href="http://studyfoss.egloos.com" name="egloo_title">F/OSS study</a></DIV>
<!--		<DIV CLASS=URL><a href="http://studyfoss.egloos.com" name="egloo_url">studyfoss.egloos.com</a></DIV>-->
		<!-- egloos content start -->
<div class='hentry'><span class='copyright_entry' style='display:none;' title='[glibc] 동적 메모리 관리 (3)@@**@@http://studyfoss.egloos.com/5209389'></span><DIV CLASS=POST>
	<DIV CLASS=POST_HEAD>
	<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH=100%>
	<TR><TD WIDTH=80%><DIV CLASS=POST_TTL><img src=http://md.egloos.com/img/vl/ico_star_o.gif> <a name="5209389" title="[glibc] 동적 메모리 관리 (3)">[glibc] 동적 메모리 관리 (3)</a></DIV></TD>
		<TD WIDTH=20% ALIGN=RIGHT></TD></TR>
	</TABLE>
	</DIV>
	<DIV CLASS=POST_BODY>
	<div class="version">glibc: 2.10.1<br/>arch: x86</div><br/>이전 글 보기:<br/><ul><li><a href="http://studyfoss.egloos.com/5206220">[glibc] 동적 메모리 관리 (1)</a></li><li><a href="http://studyfoss.egloos.com/5206979">[glibc] 동적 메모리 관리 (2)</a></li></ul><br/>이번에는 malloc 모듈 내의 다른 보조 함수들에 대해서 알아보기로 한다.<br/><br/>가장 먼저 살펴볼 함수는 mallopt() 함수이다.<br/>이 함수는 malloc() 시의 동작을 제어하는 다음과 같은 매개 변수들을 조정할 수 있다.<br/><ul><li>M_MXFAST: fast bin의 최대 크기이다. 기본값은 64로 설정되어 있으며 최대 80까지 늘릴 수 있다. (이 크기는 malloc() 시 주어지는 인자에 대한 것이며, 실제 chunk 크기는 이보다 약간 커진다.)<br/></li><li>M_TRIM_THRESHOLD: free() 호출 시 병합된 chunk의 크기가 이 값보다 커지면 자동으로 sYSTRIm() 함수를 호출한다. 기본값은 128K이다.</li><li>M_TOP_PAD: top chunk가 기본적으로 유지하는 여유 공간의 크기이다. sYSMALLOc()을 통해 top chunk의 크기를 늘릴 때나 free() 시 sYSTRIm()이 top chunk의 크기를 줄일 때 사용하며, 기본값은 (문서와는 달리) 128K이다.</li><li>M_MMAP_THRESHOLD: sYSMALLOc()을 통해 시스템에 메모리 할당을 요청할 때 원하는 chunk의 크기가 이 값보다 크다면 sbrk() 대신 mmap()을 이용하여 할당한다. 기본값은 128K이다.</li><li>M_MMAP_MAX: mmap()을 이용하여 할당할 수 있는 chunk의 최대 개수이다. 기본값은 64K이다.</li><li>M_CHECK_ACTION: 메모리 할당 오류 시 취할 행동을 결정한다. 이 값이 5이면 간단한 메시지 만을 출력하고 NULL을 반환한다. 그렇지 않고 최하위 (0번) 비트가 설정되어 있으면 자세한 메시지를 출력하고 NULL을 반환한다. 그렇지 않고 1번 비트가 설정되어 있으면 abort()를 호출하여 프로세스를 바로 종료한다. 아무 비트도 설정되지 않았으면 단순히 NULL을 반환한다. 기본값은 3이다.</li><li>M_PERTURB: 메모리 테스트를 위한 패턴을 지정한다. 이 값이 0이 아니면 새로 할당된 메모리 영역을 모두 이 값을 이용하여 채운다. 기본값은 0이다.</li></ul><br/>사실 이러한 매개 변수들은 mallopt()로 조정하지 않고도 환경 변수 설정을 통해 바꿀 수 있다. (단 M_MXFAST 제외)<br/>환경 변수의 이름은 해당 매개 변수 이름 앞의 'M_'을 'MALLOC_'으로 바꾸고 뒤에는 '_'를 붙인 형태이다.<br/>즉 다음과 같이 호출하면 된다. (bash 기준)<br/><br/><div class="source">$ export MALLOC_TOP_PAD_=4096<br/>$ ./a.out</div><br/>이 매개 변수들의 현재 값을 확인하기 위해서는 malloc_get_state() 함수를 이용할 수 있다.<br/>(하지만) 이 함수의 원형은 공개되어 있지만 이 함수가 반환하는 malloc_save_state 구조체는 공개되어 있지 않다.<br/>실제로 위의 구조체는 glibc/malloc/hooks.c에 정의되어 있으므로 그 내용을 복사해서 사용하면 된다.<br/>일반적으로 이 함수는 이러한 내용을 숨긴채 단순히 현재 동적 메모리 할당자의 상태를 저장해 두었다가<br/>나중에 다시 (malloc_set_state() 함수를 통해) 복구하는 용도로만 사용하는 듯 하다.<br/>참고로 이 함수가 반환한 구조체도 malloc()을 통해 동적으로 할당한 것이므로 사용한 후에는 free()해 주어야 한다.<br/><br/>그 외의 동적 메모리 할당자의 상태 정보는 다음과 같은 함수들을 통해서도 알 수 있다.<br/>malloc_stats() : 대략적인 메모리 할당 통계 정보를 stderr로 출력한다.<br/>mallinfo() : 메모리 할당 통계 및 free chunk들에 대한 정보를 mallinfo 구조체로 반환한다.<br/>(특이하게도 포인터가 아닌 구조체 자체를 반환한다!)<br/>malloc_info() : 메모리 할당 통계 및 free chunk들에 대한 정보를 arena 별로 나누어<br/>인자로 주어진 파일 스트림에 XML 형식으로 기록한다. 또 하나의 인자인 options는 반드시 0이어야 한다.<br/><br/>malloc_trim() 함수는 기존의 M_TOP_PAD 매개 변수를 무시하고<br/>인자로 주어진 pad 값만큼의 여유 공간 만을 확보해두고 top chunk의 나머지 영역을 sbrk()를 통해 시스템에 반환한다.<br/>추가로 large bin 내의 4K 이상의 크기를 가지는 chunk들에 대해서도 MADV_DONTNEED를 인자로 하여 madvise()를 호출해서<br/>사용하지 않는 페이지들을 시스템에 반환한다.<br/><br/>malloc_usable_size() 함수는 현재 할당된 메모리 영역에서 사용할 수 있는 크기가 얼마인지를 알려준다.<br/>메모리 할당 요청이 정렬 제한보다 작은 단위의 크기이거나 정확한 크기의 chunk를 찾지 못한 경우에는<br/>실제로 요청한 크기보다 큰 chunk가 할당되었을 수 있다.<br/>(예를 들어 0바이트의 요청에도 16 바이트 크기의 chunk를 반환한다.)<br/><br/>이 함수의 반환값은 일반 chunk인 경우 다음 chunk의 prev_size 필드(footer)까지 이용할 수 있으므로<br/>chunk 크기에서 (size 필드(header)에 필요한) 4바이트를 뺀 크기이며<br/>mmap()으로 할당한 chunk의 경우에는 다음 chunk가 존재하지 않으므로 chunk 크기에서 8을 뺀 크기이고<br/>free()된 chunk인 경우에는 (당연하게도) 0이다.<br/>주의할 점은 fast bin에 속하는 chunk의 경우 free()된 후에도<br/>곧바로 P 플래그가 지워지지 않기 때문에 malloc_usable_size()는 원래의 크기를 반환한다는 것이다.<br/><br/>이 외에도 할당된 메모리 주소를 원하는 위치로 정렬하여 반환하도록 하는 함수들이 있다.<br/>(정렬은 chunk 시작 주소가 아닌 사용자에게 반환되는 메모리 주소 기준으로 이루어진다.)<br/>memalign() 함수는 POSIX 표준 이전에 정의된 함수로 인자로 지정한 정렬 기준과 크기에 맞는 메모리 영역을 할당하여 반환한다.<br/>valloc() 함수는 memalign()에서 정렬 기준을 시스템의 페이지 크기로 한 것이다.<br/>pvalloc() 함수는 memalign()에서 정렬 기준과 크기를 모두 시스템의 페이지 단위로 맞춘 것이다.<br/>posix_memalign() 함수는 memalign과 비슷하지만 반환되는 포인터의 주소를 인자로 넘기도록 하고 에러 코드를 반환한다.<br/><br/>이들은 내부적으로 요청한 크기보다 더 큰 크기로 _int_malloc() 함수를 호출하여 정렬된 위치에 chunk를 새로 할당하고<br/>나머지 영역은 가능하다면 다시 chunk로 만들어서 _int_free() 함수를 통해 곧바로 해지한다.<br/><br/>마지막으로 기존의 malloc(), free() 등의 기본 동작을 override 할 수 있는 여러 hook들이 존재한다.<br/>이 hook 변수에 원하는 함수를 설정하여 통계 정보나 디버깅 정보 등을 수집하는 용도로 사용할 수 있다.<br/>일반적으로 hook 함수는 원하는 작업을 먼저 수행한 뒤 예전 hook을 복원하고 원래의 함수를 호출한 후에<br/>다시 hook을 설정하는 방식으로 작성한다.<br/>자세한 내용은 __malloc_hook(3) man 페이지나 <a target="_blank" href="http://kldp.org/node/68481">cinsk님의 강좌</a>를 살펴보면 좋을 것이다.<br/><div style="clear:both; _display: none;"></div><div class="posttaglist"><a href="/tag/glibc" rel="tag">glibc</a>,&nbsp;<a href="/tag/memory" rel="tag">memory</a>,&nbsp;<a href="/tag/malloc" rel="tag">malloc</a></div>
       <!--
       <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
		    xmlns:dc="http://purl.org/dc/elements/1.1/"
		    xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
       <rdf:Description
	        rdf:about="http://studyfoss.egloos.com/5209389"
	        dc:identifier="http://studyfoss.egloos.com/5209389"
	        dc:title="[glibc] 동적 메모리 관리 (3)"
	        trackback:ping="http://studyfoss.egloos.com/tb/5209389"/>
       </rdf:RDF>
       -->

	</DIV>
	<DIV CLASS=POST_TAIL ALIGN=RIGHT><span class="TIME"> <a href="/5209389" class="permalink" title="[glibc] 동적 메모리 관리 (3)" rel="bookmark">#</a> by <span class="AUTHOR">namhyung</span> | <a href="/5209389" class="time"  title="[glibc] 동적 메모리 관리 (3)" rel="bookmark">2009/12/29 18:48</a></span> | <a href="/category/System" class="category">System</a> | <span class="linkback"><a href="#trb" onclick="trbview('5209389','c0098335','0'); return false;" class="tail_trb">트랙백(<span id="trbcnt5209389">1</span>)</a></span> | <span class="linkback"><a href="#cmt" onclick="cmtview('5209389','c0098335','0'); return false;" class="tail_cmt">덧글(<span id="cmtcnt5209389">2</span>)</a></span></DIV>
		<span id="cmt5209389"></span>
</DIV>
</div><!-- egloos content end -->
<span style="float: left"><a href="/page/98">◀ 이전 페이지</a></a></span>
<span style="float: right"><a href="/page/100">다음 페이지 ▶</a></span>
<BR><BR>
<DIV ID='BOTTOMBANNER' style="display:none;">	<div class="BANNER"><a href="http://www.egloos.com"><img src="http://md.egloos.com/img/edt/banner_ffffff_1.gif" width="150" height="50" border="0" alt="Powered by egloos" /></a></div>
<BR><BR></DIV>
</DIV>
<DIV ID=LEFTSIDE style="display:block;">
	<DIV ID=LOGO></DIV>
	     <script language="javascript" type="text/javascript">
     <!--
     var s_calendar = new Array();
     s_calendar = [];
	  calendar("","");
     -->
     </script>

	
<DIV CLASS=MNTTL>카테고리</DIV>
<DIV CLASS=MNBODY>
<a href="/category/General">General</a><br/><a href="/category/Application">Application</a><br/><a href="/category/System">System</a><br/><a href="/category/Kernel">Kernel</a><br/><a href="/category/Book">Book</a><br/><a href="/category/Tips">Tips</a><br/>
</DIV>

<DIV CLASS=MNTTL>태그</DIV>
<DIV CLASS=MNBODY><a href="/tag/build" class="tlevel3"> build</a>
<a href="/tag/elf" class="tlevel3"> elf</a>
<a href="/tag/x86" class="tlevel3"> x86</a>
<a href="/tag/bash" class="tlevel2"> bash</a>
<a href="/tag/block-layer" class="tlevel2"> block-layer</a>
<a href="/tag/CAaQA3" class="tlevel3"> CAaQA3</a>
<a href="/tag/patch" class="tlevel3"> patch</a>
<a href="/tag/glibc" class="tlevel3"> glibc</a>
<a href="/tag/script" class="tlevel1"> script</a>
<a href="/tag/algorithm" class="tlevel3"> algorithm</a>
<a href="/tag/SMP" class="tlevel2"> SMP</a>
<a href="/tag/kernel" class="tlevel3"> kernel</a>
<a href="/tag/gcc" class="tlevel3"> gcc</a>
<a href="/tag/perf" class="tlevel1"> perf</a>
<a href="/tag/binutils" class="tlevel2"> binutils</a>
<a href="/tag/computer-architecture" class="tlevel3"> computer-architecture</a>
<a href="/tag/C" class="tlevel3"> C</a>
<a href="/tag/documentation" class="tlevel1"> documentation</a>
<a href="/tag/CARM" class="tlevel1"> CARM</a>
<a href="/tag/git" class="tlevel2"> git</a>
<a href="/tag/emacs" class="tlevel3"> emacs</a>
<a href="/tag/blktrace" class="tlevel1"> blktrace</a>
<a href="/tag/memory" class="tlevel3"> memory</a>
<a href="/tag/synchronization" class="tlevel3"> synchronization</a>
<a href="/tag/sed" class="tlevel1"> sed</a>
<a href="/tag/linux" class="tlevel3"> linux</a>
<a href="/tag/compiler" class="tlevel3"> compiler</a>
<a href="/tag/awk" class="tlevel1"> awk</a>
<a href="/tag/vcs" class="tlevel1"> vcs</a>
<a href="/tag/scm" class="tlevel1"> scm</a>
<div style="text-align:right;margin-top:5px;"><a href="/tag">전체보기</a></div>
</DIV>

<DIV CLASS=MNTTL>이글루 파인더</DIV>
<DIV CLASS=MNBODY><form id="finder" style="margin:0;" name="finder" method="post" action="http://studyfoss.egloos.com/" onsubmit="return go_search(document.finder);"><input type="text" id="srch_kwd" name="srch_kwd" size="10" style="vertical-align: middle;width: 100px;font-size:12px;" maxlength="30"/><input type="image" style="vertical-align: middle;margin-left:3px;" src="http://md.egloos.com/img/fnd/searchb.gif" /><p style="margin:3px 0 0 13px;text-align:left"><a href="http://www.zum.com" target="_blank"><img src="http://md.egloos.com/img/search/txt_power.png"></a></p></form>
</DIV>

<DIV CLASS=MNTTL>최근 등록된 덧글</DIV>
<DIV CLASS=MNBODY>
<style type="text/css"> 
.reply_write {margin:10px 0;}
.reply_write fieldset {border:none;margin:0;padding:0;}
.reply_write legend {display:none;}
.reply_write .comment_info {width:95%;}
.reply_write .comment_info span.comment_name,
.reply_write .comment_info span.comment_passwd,
.reply_write .comment_info span.comment_blog {display:block;padding:0 0 2px 0;clear:both;}
.reply_write .comment_info span.comment_blog {float:left;}
.reply_write .comment_info span.comment_name label,
.reply_write .comment_info span.comment_passwd label,
.reply_write .comment_info span.comment_blog label {display:block;float:left;width:55px;}
.reply_write .comment_info input {padding:1px 0 0 1px;vertical-align:middle;}
.reply_write .comment_info input.name {width:100px;}
.reply_write .comment_info input.passwd {width:60px;}
.reply_write .comment_info input.blog {width:200px;font-family:tahoma,sans-serif;font-size:11px;}
.reply_write .comment_info span.comment_now {display:none;}
.reply_write .comment_info span.comment_login {float:right;}
.reply_write textarea {margin:2px 0;padding:0;width:95%;height:100px;margin-left:0 !important;font:normal 12px '돋움',sans-serif;}
.reply_write .comment_btn {width:95%;height:23px;position:relative;*position:static;*text-align:right;}
.reply_write .comment_btn .comment_submit {position:absolute;top:0;right:0;*position:static;*text-align:right;}
</style>     

<a href="http://studyfoss.egloos.com/5129119#12438993">이렇게 좋은 글이 한글로 있다는 것..</a><br/><span class="SMALL">by 프로그라머 at 02/17</span><br/><div style="margin:12px;"></div><a href="http://studyfoss.egloos.com/5512112#12419757">흐름을 이해할 수 있는글이라 좋..</a><br/><span class="SMALL">by morenice at 11/26</span><br/><div style="margin:12px;"></div><a href="http://studyfoss.egloos.com/4951809#12401092">좋은 글 감사합니다~퍼갑니다~</a><br/><span class="SMALL">by 김석범 at 09/10</span><br/><div style="margin:12px;"></div>
</DIV>

<DIV CLASS=MNTTL>최근 등록된 트랙백</DIV>
<DIV CLASS=MNBODY>
<a href="http://studyfoss.egloos.com/5350643#515727">이맥스의 파일 변수 사용하기</a><br/><span class="SMALL">by 개똥이야기</span><br/><div style="margin:12px;"></div><a href="http://studyfoss.egloos.com/4951809#512679">asmlinkage modifier in Linux..</a><br/><span class="SMALL">by novum의 공유창고</span><br/><div style="margin:12px;"></div><a href="http://studyfoss.egloos.com/5409933#511713">구조체의 패킹에 대한 이야기</a><br/><span class="SMALL">by 김재호의 디지털보단 아날로그</span><br/><div style="margin:12px;"></div>
</DIV>








<DIV style="TEXT-ALIGN:center; width:200px;">
<div class="XML"><a href="http://rss.egloos.com/blog/studyfoss" target="_new"><img src="http://md.egloos.com/img/skn/rss.gif" alt="rss" border="0" /></a><br /><br /> skin by <a href="http://jiinny.egloos.com">jiinny</a></div>
<BR /><BR />
<DIV ID=OHLOH><a href='https://www.ohloh.net/accounts/115130?ref=Detailed'>
  <img alt='Ohloh profile for Namhyung Kim' height='35' src='https://www.ohloh.net/accounts/115130/widgets/account_detailed.gif' width='191' border='0' />
</a></DIV>
</DIV>
</DIV>
<DIV ID='LEFTSHOW'  onclick=document.all['RIGHTMAIN'].style.right='300px';document.all['BOTTOMBANNER'].style.display='none';document.all['LEFTSIDE'].style.display='block';document.all['LEFTSHOW'].style.display='none';document.all['LEFTHIDE'].style.display='block';  style='color:red;display:none;'>
</DIV>

<DIV id='LEFTHIDE' onclick=document.all['RIGHTMAIN'].style.right='20px';document.all['BOTTOMBANNER'].style.display='block';document.all['LEFTSIDE'].style.display='none';document.all['LEFTHIDE'].style.display='none';document.all['LEFTSHOW'].style.display='block';  style='color:red'>X</DIV><iframe src="http://www.egloos.com/estat/stat_logger.php?bid=c0098335&ref=&openflag=" style="width: 0px; height: 0px; border: 0px solid #fff;"></iframe>
<img width="0" height="0" border="0" src="http://studyfoss.egloos.com/egloo_pds.php?eid=c0098335" alt="" />
<form id="trackfrom" name="trackfrom" method="post" action="">
<input type="hidden" name="url" value="" />
<input type="hidden" name="title" value="" />
<input type="hidden" name="trburl" value="" />
</form>
<div style="z-index:9901;top:764px;left:169px;display:none;" id="egloo_bookmark" class="popupWrap">
    <div class="popupTitle">이글루링크 추가하기</div>
    <dl class="popupBody">
        <dt class="no-arrow" style="background:none;font-size:12px;text-align:center;">
            <span id="egloo-bookmark-url" style="color:#0F71A1;"></span>
            (<span id="egloo-bookmark-name"></span>)을(를)</dt>
        <dd class="notice" style="margin:0;padding:0 0 0 8px;line-height:1.8em;color:#000;font-size:12px;text-align:center;">이글루링크로 추가하시겠습니까? 추가하시려면 그룹선택을 하세요.</dd>
        <dd class="notice weak" style="margin:0;padding:0 0 0 8px;line-height:1.8em;font-size:11px;color:#666666;text-align:center;">(그룹선택 하지 않는 경우, 최상단 목록에 추가됩니다.)</dd>
        <dd class="egloo-bookmark-group" style="margin:0;padding:10px 0 8px;line-height:1.8em;text-align:center;color:#333;font-size:12px;text-align:center;">그룹선택 :
            <select name="groupID" id="egloo-bookmark-groupID" style="font-family:'돋움','dotum','Trebuchet MS',Sans-serif;margin-left:10px;"><option value="000">그룹선택없음</option></select></dd>
        <dd class="buttons">
            <input type="button" value="지금 확인" onfocus="blur();" onclick="Modal.insertBookmark(true);" class="button btn24 btn_bold"/>
            <input type="button" value="나중에 확인" onfocus="blur();" onclick="Modal.insertBookmark(false);" class="button btn24 btn_weak"/>
        </dd>
        <dd class="close" onclick="Modal.close();"><img src="http://md.egloos.com/img/www/btn/button_popup_close.gif" alt="이글루링크 취소" title="이글루링크 취소" /></dd>
    </dl>
</div>
</body>
</html>
